<!DOCTYPE html>

<html>
  <head>
    <meta http-equiv="Content-Type" const="text/html;charset=UTF-8" />
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css'><link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css'>
    <link rel="stylesheet" type="text/css" href="chat.css" >
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
    <title>AIWoZ chatbot</title>
  </head>

  <!--The template for this experiment was adapted from 
    Capitain Anonymous: https://codepen.io/anon/pen/QVgKYY -->
  
  <body>
  <div class="container clearfix">
 
    <div class="chat">
      <div class="chat-header clearfix">
        <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/chat_avatar_01_green.jpg" alt="avatar" />
        
        <div class="chat-about">
          <div class="chat-with">Reminiscence chat</div>
          <div id="feedback" class="chat-num-messages"></div>
        </div>
        <i class="fa fa-star"></i>
      </div> <!-- end chat-header -->
      
      <div class="chat-history">
        <ul>
     
        </ul>
        
      </div> <!-- end chat-history -->
      
      <div class="chat-message clearfix">
        <textarea name="message-to-send" id="message-to-send" placeholder ="Type your message" rows="3"></textarea>
        
                
        <i class="fa fa-file-image-o opt-image"></i> 
        
        <button>Send</button>

      </div> <!-- end chat-message -->
      
    </div> <!-- end chat -->
    
  </div> <!-- end container -->

<script id="message-template" type="text/x-handlebars-template">
  <li class="clearfix">
    <div class="message-data align-right">
      <span class="message-data-time" >{{time}}, Today</span> &nbsp; &nbsp;
      <span class="message-data-name" >{{username}}</span> <i class="fa fa-circle me"></i>
    </div>
    <div class="message other-message float-right">
      {{#if isPicture}}
        <img src="{{message}}">
      {{else}}
        {{message}}
      {{/if}}
    </div>
  </li>
</script>

<script id="message-response-template" type="text/x-handlebars-template">
  <li>
    <div class="message-data">
      <span class="message-data-name"><i class="fa fa-circle online"></i> {{username}}</span>
      <span class="message-data-time">{{time}}, Today</span>
    </div>
    <div class="message my-message">
      {{message}}
    </div>
  </li>
</script>
    
<script id="message-nlp-template" type="text/x-handlebars-template">
  <li>
    <div class="message-data">
      <span class="message-data-name"><i class="fa fa-circle online"></i> {{username}}</span>
      <span class="message-data-time">{{time}}, Today</span>
    </div>  
    <div class="message ai-message">
      <p>
      {{#with annotations.documentSentiment}}
      score: {{formatNum score}}
      magnitud: {{formatNum magnitude}}
      {{/with}}
      </p>

      <table class="table">
      <tr>
        <th>Name</th>
        <th>Type</th> 
        <th>Salience</th>  
        <th>Wiki</th>
      </tr>        
      {{#each annotations.entities}}

        <tr>
          <td>{{name}}</td>
          <td>{{type}}</td>  
          <td>{{formatNum salience}}</td> 
          
          <td>
          {{#if metadata.wikipedia_url}}
            <a href="{{metadata.wikipedia_url}}">Wiki</a>
          {{/if}}
          </td>  
          
        </tr>
      {{/each}}
      </table>

  </div>
  </li>
</script>    
    
<script id="message-vision-template" type="text/x-handlebars-template">
  <li>
    <div class="message-data">
      <span class="message-data-name"><i class="fa fa-circle online"></i> {{username}}</span>
      <span class="message-data-time">{{time}}, Today</span>
    </div>  
    <div class="message ai-message">

      <table class="table">
      <tr>
        <th>Label</th>
        <th>Score</th>        
      </tr>          
      {{#each annotations.labels}}
      <tr>
        <td>{{description}}</td>
        <td>{{formatNum score}}</td>        
      </tr>  
      {{/each}}
      </table>
      
      {{#if annotations.landmarks.length}}
        <table class="table">
        <tr>
          <th>Landmark</th>
          <th>Coordinates</th>        
        </tr>          
        {{#each annotations.landmarks}}
        <tr>
          <td>{{description}}</td>
          <td>
            <span> (Score: {{score}}) </span><br>
            {{#each locations}}   
            
            <span> Latitude: {{latLng.latitude}} </span><br>
            <span> Longitude: {{latLng.longitude}} </span>
            {{/each}}
          </td>        
        </tr>  
        {{/each}}
        </table>  
      {{else}}
        <p>Location not detected</p>
      {{/if}}
      
      {{#if annotations.faces.length}}
      <p>Detected: {{annotations.faces.length}} faces</p>
        <table class="table">
        <tr>
          <th>Face</th>
          <th>Expression</th>        
        </tr>          
        {{#each annotations.faces}}
        <tr>
          <td>confidence: {{formatNum detectionConfidence}}</td>
          <td>
            <span class="e-{{angerLikelihood}}"> Anger: {{angerLikelihood}}</span><br>
            <span class="e-{{headwearLikelihood}}"> Headwear: {{headwearLikelihood}}</span><br>
            <span class="e-{{joyLikelihood}}"> Joy: {{joyLikelihood}}</span><br>
            <span class="e-{{sorrowLikelihood}}"> Sorrow: {{sorrowLikelihood}}</span><br>
            <span class="e-{{surpriseLikelihood}}"> Surprise: {{surpriseLikelihood}}</span><br>
            <span class="e-{{blurredLikelihood}}"> Blurred: {{blurredLikelihood}}</span><br>
            <span class="e-{{underExposedLikelihood}}"> Under exposure: {{underExposedLikelihood}}</span>            
            
          </td>        
        </tr>  
        {{/each}}
        </table>  
      {{else}}
      <p>No faces detected</p>
      {{/if}}     
      
        <p>Dominant colors</p>
        <div class="colors">
        {{#each annotations.properties.dominantColors.colors}}
        <i class="fa" style="background:rgb({{color.red}},{{color.green}},{{color.blue}});width:{{formatPerc pixelFraction}};"
           title="{{formatPerc pixelFraction}}"></i>
        {{/each}}
        </div>

      
      
  </div>
  </li>
</script>     
    
    <script src='https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.0/handlebars.min.js'></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="chat.js"></script>      

  </body>
</html>